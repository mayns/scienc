##########################################
#                                        #
# Настройка проекта Science для Mac OS X #
#                                        #
##########################################

Homebrew
--------
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

PCRE
----
brew install pcre

IMAGE LIBS
----------
brew install libjpeg libpng

NGINX
-----
brew install nginx --with-http_gzip_static_module --with-ipv6 --with-http_dav_module

POSTGRES
--------
brew install postgresql

launch db:
postgres -D /usr/local/var/postgres

Необходимые пакеты
------------------
pip install tornado django simplejson 
pip install PIL --allow-unverified PIL --allow-all-external
pip install pillow
pip install psycopg2 momoko 

SSH
---
ssh-keygen
Enter
Phrase
pbcopy < id_rsa.pub
добавить ключ в профиль на сайте

Создаем папку проекта и заодно репу
------------------
sudo mkdir /gen
sudo chmod -R 777 /gen
cd /gen/
git clone git@github.com:mayns/scienc.git

Настраиваем Nginx
----------------
mkdir /usr/local/nginx
ln -s /usr/loca/nginx/sbin/nginx /usr/local/bin/nginx
cd /gen/scienc
В configs/dev/nginx.conf заменить epoll на kqueue
cp -R configs/dev/nginx.conf /usr/local/nginx/conf

В scienc.conf проверить все пути, чтобы ссылались на папку проекта
mkdir /var/log/nginx/
mkdir /usr/local/nginx/sites-enabled
cp configs/dev/scienc.conf /usr/local/nginx/sites-enabled
ln -s /usr/local/nginx/sbin/nginx /usr/bin/

mkdir /opt/science/media/
chmod -R 777 /opt/science/media/
cp -f /gen/scienc/configs/dev/scmedia.conf /usr/local/nginx/sites-enabled
nano /etc/hosts — > 127.0.0.1 media-science.dev

Запуск Nginx
----------------
nginx

Остановка Nginx
----------------
nginx -s stop

Установка PostgreSQL with MacPorts
----------------
sudo port -v selfupdate
sudo port install postgresql93-server

Создаем папку, где будет храниться база
sudo mkdir -p /opt/db/postgresql93/defaultdb

Устанавливаем владельца и пароль
sudo chown postgres:postgres /opt/db/postgresql93/defaultdb

Инициализируем первоналачальную базу
sudo su postgres -c '/opt/local/lib/postgresql93/bin/initdb -D /opt/db/postgresql93/defaultdb'

Запускаем сервер
sudo su postgres -c '/opt/local/lib/postgresql93/bin/postgres -D /opt/db/postgresql93/defaultdb'

Прописываем путь
export PATH=/opt/local/lib/postgresql93/bin:$PATH

----- НУЖНО ПРАВИТЬ Для версии 9.4

Инициализируем первоналачальную базу
sudo su postgres -c '/Library/PostgreSQL/9.4/bin/initdb -D /opt/db/postgresql94/defaultdb'

Запускаем сервер
/Library/PostgreSQL/9.4/bin/postgres -D /opt/db/postgresql94/defaultdb

/Library/PostgreSQL/9.4/bin/pg_ctl -D /opt/db/postgresql94/defaultdb -l logfile start

Прописываем хосты
-----------------
sudo -s
nano /etc/hosts
127.0.0.1       sciencemates.dev

Настройка IDE
----------------
В PyCharm заходим в Settings --> File and Code Templates, выбираем Python Script, вставляем первой строкой 
# -*- coding: utf-8 -*-

Запуск Tornado
----------------
python /gen/scienc/mainScience.py --port=6600
