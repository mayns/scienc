<link rel="import" href="/static/elements/polymer/polymer.html"/>
<link rel="import" href="/static/elements/core-ajax/core-ajax.html"/>
<link rel="import" href="/static/elements/app-globals.html"/>

<polymer-element name="app-ajax" attributes="url handleAs params response error method headers body contentType withCredentials progress loading">
	<template>
		<core-ajax 	id="ajax"
				   	url="{{url}}"
				   	handleAs="{{handleAs}}"
				   	params="{{params}}"
					response="{{response}}"
					error="{{error}}"
					method="{{method}}"
					headers="{{headers}}"
					body="{{body}}"
					contentType="{{contentType}}"
					withCredentials="{{withCredentials}}"
					progress="{{progress}}"
					loading="{{loading}}">
	   	</core-ajax>
		<app-globals id="globals"></app-globals>
	</template>
	<script>
		Polymer({
			makeRequest: function(formData) {
				var ajax = this.$.ajax;

				if (!formData) {
					formData = new	FormData();
				}

				formData.append('_xsrf', this.$.globals.userData._xsrf);
				ajax.body = formData;
				ajax.go();
			}
		});
	</script>
</polymer-element>