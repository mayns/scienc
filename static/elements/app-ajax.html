<link rel="import" href="/static/elements/polymer/polymer.html"/>
<link rel="import" href="/static/elements/core-ajax/core-ajax.html"/>
<link rel="import" href="/static/elements/science-app.html"/>

<polymer-element name="app-ajax" attributes="url handleAs params response error method headers body contentType withCredentials progress loading">
	<template>
		<core-ajax 	
			id="ajax"
		   	url="{{url}}"
		   	handleAs="{{handleAs}}"
		   	params="{{params}}"
			response="{{response}}"
			error="{{error}}"
			method="{{method}}"
			headers="{{headers}}"
			body="{{body}}"
			contentType="{{contentType}}"
			withCredentials="{{withCredentials}}"
			progress="{{progress}}"
			loading="{{loading}}">
	   	</core-ajax>
	</template>
	<script>
		Polymer('app-ajax', {
            ready: function() {
                this.app = $$.byId('app');
            },
			makeRequest: function(formData) {
				var ajax = this.$.ajax;

				if (!formData) {
					formData = new	FormData();
				}

				formData.append('_xsrf', this.app._xsrf);
				ajax.body = formData;
				ajax.go();
			}
		});
	</script>
</polymer-element>